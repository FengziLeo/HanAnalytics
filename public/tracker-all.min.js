(a=>{const{location:b,document:c,navigator:d}=a,{hostname:e,pathname:f}=b,{currentScript:g,referrer:h}=c,i=h.includes(e)?"":h;if(!g||0<d.userAgent.indexOf("Electron"))return;const j=g.getAttribute.bind(g),k=j("data-website-id"),l=new URL(g.src).origin+"/send";let m=!0,n=!0;let o={};try{o=JSON.parse(localStorage.getItem("_vhLastVisit"))||{},"object"!=typeof o&&(o={})}catch(a){localStorage.removeItem("_vhLastVisit")}const p=o[f]||0,q=localStorage.getItem("_vhLastVisitor")||0,r=new Date,s=new Date(+q),t=new Date(+p);r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()&&r.getDate()===s.getDate()?m=!1:localStorage.setItem("_vhLastVisitor",Date.now()),Date.now()-t.getTime()<1800000?n=!1:(o[f]=Date.now(),localStorage.setItem("_vhLastVisit",JSON.stringify(o)));const u=a=>{if(!a)return"";try{if(decodeURI(a)!==a)return decodeURI(a)}catch(b){return a}return encodeURI(a)},v=async()=>{if(k)try{await fetch(l,{method:"POST",body:JSON.stringify({website:k,host:e,path:u(f+b.search),referrer:u(i),visitor:m,visit:n}),headers:{"Content-Type":"application/json"}})}catch(a){}};v()})(window);
